
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>An example of using pyDARTdiags with DART and the Lorenz 63 model &#8212; pyDARTdiags</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery.css?v=d2d258e8" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-binder.css?v=f4aeca0c" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-dataframe.css?v=2082cf3c" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-rendered-html.css?v=1277b6f3" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../_static/doctools.js?v=fd6eb6e6"></script>
    <script src="../_static/sphinx_highlight.js?v=6ffebe34"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'userguide/dartworkflow';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Developer Guide" href="../devel/index.html" />
    <link rel="prev" title="Statistics" href="statistics.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>
<aside class="bd-header-announcement" aria-label="Announcement">
  <div class="bd-header-announcement__content">Welcome to the pyDARTdiags documentation! ðŸš€</div>
</aside>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
  
    <p class="title logo__title">pyDARTdiags</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item current active">
  <a class="nav-link nav-internal" href="index.html">
    User Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../devel/index.html">
    Developer Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../examples/index.html">
    Examples
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../api/index.html">
    API Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://github.com/NCAR/pyDARTdiags/releases">
    Release Notes
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/NCAR/pyDARTdiags" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item current active">
  <a class="nav-link nav-internal" href="index.html">
    User Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../devel/index.html">
    Developer Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../examples/index.html">
    Examples
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../api/index.html">
    API Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://github.com/NCAR/pyDARTdiags/releases">
    Release Notes
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/NCAR/pyDARTdiags" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><p aria-level="2" class="caption" role="heading"><span class="caption-text">User Guide</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="installguide.html">Install Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="working-with-obsq.html">Observation Sequences</a></li>
<li class="toctree-l1"><a class="reference internal" href="statistics.html">Statistics</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">An example of using pyDARTdiags with DART and the Lorenz 63 model</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">User Guide</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">An example of using pyDARTdiags with DART and the Lorenz 63 model</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="an-example-of-using-pydartdiags-with-dart-and-the-lorenz-63-model">
<span id="dartworkflow"></span><h1>An example of using pyDARTdiags with DART and the Lorenz 63 model<a class="headerlink" href="#an-example-of-using-pydartdiags-with-dart-and-the-lorenz-63-model" title="Link to this heading">#</a></h1>
<p>This page will demonstrate how to use pyDARTdiags to enhance your data assimilation projects
with DART by showing you how to manipulate DART observation sequences and analyze DART results.</p>
<p>We assume you have downloaded and built DART and successfully run the
<a class="reference external" href="https://docs.dart.ucar.edu/en/latest/guide/da-in-dart-with-lorenz-63.html">Lorenz 63 model</a>.</p>
<p>In this guide, weâ€™ll step through:</p>
<ul class="simple">
<li><p>Using pyDARTdiags to change the observations input to DARTâ€™s filter program</p></li>
<li><p>Using pyDARTdiags to plot rank histograms of the DART Lorenz 63 obs_seq.final files,
both for the original run of filter and for the run with the modified observations</p></li>
</ul>
<section id="manipulating-observation-sequences-with-pydartdiags">
<h2>Manipulating Observation Sequences with pyDARTdiags<a class="headerlink" href="#manipulating-observation-sequences-with-pydartdiags" title="Link to this heading">#</a></h2>
<p>This section focuses on how pyDARTdiags fits into a DART workflow, guiding you through the process
of running a Python program in an interactive session thats uses pyDARTdiags functions to read in
the observation sequence file, modify the observation error variances, and write out a new
observation sequence file with the altered data.</p>
<p>You will be working through the examples in this guide in the Lorenz 63 model working directory.
Navigate to your DART installation directory and then to the <code class="docutils literal notranslate"><span class="pre">DART/models/lorenz_63/work</span></code>
directory in your terminal.</p>
<p>First, ensure you have pyDARTdiags installed in your Python environment. If you havenâ€™t
installed it yet, follow the instructions in the <a class="reference internal" href="installguide.html#installguide"><span class="std std-ref">Install Guide</span></a>.</p>
<p>Start an interactive Python session by entering the command <code class="docutils literal notranslate"><span class="pre">python</span></code> or <code class="docutils literal notranslate"><span class="pre">python3</span></code>
in your terminal.</p>
<p>Enter the following lines of code one by one. You can copy and paste them from below.</p>
<ol class="arabic">
<li><p>Import the necessary modules.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">pydartdiags.obs_sequence.obs_sequence</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">obsq</span>
</pre></div>
</div>
</li>
<li><p>Specify the name of the observation sequence file to be read. This will be the
Lorenz 63 <code class="docutils literal notranslate"><span class="pre">obs_seq.out</span></code> file that is included in DART and is already located
in your current working directory.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">file_name</span> <span class="o">=</span> <span class="s2">&quot;obs_seq.out&quot;</span>
</pre></div>
</div>
</li>
<li><p>Read the obs_seq file into an obs_seq object.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">obs_seq</span> <span class="o">=</span> <span class="n">obsq</span><span class="o">.</span><span class="n">ObsSequence</span><span class="p">(</span><span class="n">file_name</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>Halve the observation error variances.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">obs_seq</span><span class="o">.</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;obs_err_var&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">obs_seq</span><span class="o">.</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;obs_err_var&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mf">2.0</span>
</pre></div>
</div>
</li>
<li><p>Create a new file name for the modified observation sequence.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">output_file</span> <span class="o">=</span> <span class="n">file_name</span> <span class="o">+</span> <span class="s2">&quot;.half_error_variance&quot;</span>
</pre></div>
</div>
</li>
<li><p>Write out the modified observation sequence to a new file.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">obs_seq</span><span class="o">.</span><span class="n">write_obs_seq</span><span class="p">(</span><span class="n">output_file</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>Exit the interactive session.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>exit<span class="o">()</span>
</pre></div>
</div>
</li>
</ol>
<p>A new observation sequence file with the modified error variances should be saved in your
current directory. The new file will have be the name of the observation sequence file you
specified with <code class="docutils literal notranslate"><span class="pre">.half_error_variance</span></code> appended to the end.</p>
<p>You can now use this new observation sequence file as input to a new DART data assimilation
experiment with Lorenz 63. Ensure you have made the necessary changes to the &amp;filter_nml
section of the DART <code class="docutils literal notranslate"><span class="pre">input.nml</span></code> namelist file to point the <code class="docutils literal notranslate"><span class="pre">obs_sequence_in_name</span></code> namelist item
to this new input observation sequence file and give a corresponding name for the output
observation sequence file (i.e <code class="docutils literal notranslate"><span class="pre">obs_seq.final.half_error_variance</span></code>) in the <code class="docutils literal notranslate"><span class="pre">obs_sequence_out_name</span></code>
item. Rerun the filter program.</p>
</section>
<section id="analyzing-dart-results-with-pydartdiags">
<h2>Analyzing DART Results with pyDARTdiags<a class="headerlink" href="#analyzing-dart-results-with-pydartdiags" title="Link to this heading">#</a></h2>
<p>You have now completed two DART data assimilation experiments, each producing an
final observation sequence file, or <code class="docutils literal notranslate"><span class="pre">obs_seq.final</span></code>. This file contains the actual
observations as assimilated as well as the ensemble forward-operator expected values
and any quality-control values.</p>
<p>You can now use the pyDARTdiags library to read in and analyze the observation
space results of your DART assimilation experiment. In this example, weâ€™ll plot the
<a class="reference internal" href="statistics.html#stats-rank-hist"><span class="std std-ref">Rank Histogram</span></a> of the DART Lorenz 63 obs_seq.final files.</p>
<p>The observation sequence files you created for Lorenz 63 contain only identity
observations. You can read about identity observations in
<a class="reference external" href="https://ncar.github.io/pyDARTdiags/userguide/working-with-obsq.html#a-note-on-identity-observations">this section</a>
of the pyDARTdiags documentation.</p>
<p>Identity observations do not get listed in the header of the observation sequence file; they
are instead given a special value for the observation type (kind) in the observation sequence
to indicate that they are identity observations. They are denoted in a given observation by an
observation type of -x where x is the index in the DART state vector that the observation
corresponds to.</p>
<p>In the ObsSequence DataFrame, the type of identity observations is stored as this negative integer
of the index in the DART state vector. Therefore, when writing the program to plot the rank
histograms, you will specify the observation type as <code class="docutils literal notranslate"><span class="pre">IDENTITY_OBS</span></code>.</p>
<p>Start an interactive Python session by entering the command <code class="docutils literal notranslate"><span class="pre">python</span></code> or <code class="docutils literal notranslate"><span class="pre">python3</span></code>
in your terminal.</p>
<p>Enter the following lines of code one by one. You can copy and paste them from below.</p>
<ol class="arabic">
<li><p>Import the obs_sequence module.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">pydartdiags.obs_sequence.obs_sequence</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">obsq</span>
</pre></div>
</div>
</li>
<li><p>Import the matplots module.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">pydartdiags.matplots.matplots</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">mp</span>
</pre></div>
</div>
</li>
<li><p>Specify the path to and name of the final observation sequence file from
your first DART data assimilation experiment.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">file_name</span> <span class="o">=</span> <span class="s2">&quot;obs_seq.final&quot;</span>
</pre></div>
</div>
</li>
<li><p>Specify the path to and name of the final observation sequence file from
your second DART data assimilation experiment.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">file_name2</span> <span class="o">=</span> <span class="s2">&quot;obs_seq.final.half_error_variance&quot;</span>
</pre></div>
</div>
</li>
<li><p>Read the first observation sequence file into an obs_seq object.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">obs_seq</span> <span class="o">=</span> <span class="n">obsq</span><span class="o">.</span><span class="n">ObsSequence</span><span class="p">(</span><span class="n">file_name</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>Read the second observation sequence file into an obs_seq object.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">obs_seq_half_ev</span> <span class="o">=</span> <span class="n">obsq</span><span class="o">.</span><span class="n">ObsSequence</span><span class="p">(</span><span class="n">file_name2</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>Choose an observation type to plot on the rank histograms.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">obs_type</span> <span class="o">=</span> <span class="s2">&quot;IDENTITY_OBS&quot;</span>
</pre></div>
</div>
</li>
<li><p>Set the ensemble size used in your DART experiments.
For the Lorenz 63 model, the default ensemble size is 20.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ens_size</span> <span class="o">=</span> <span class="mi">20</span>
</pre></div>
</div>
</li>
<li><p>Plot the rank histograms for the first obs_seq.final.
The dataframe has prior and posterior information so both the prior and posterior rank
histograms are plotted.</p>
<p>Once plotted, save the figure and close it.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">mp</span><span class="o">.</span><span class="n">plot_rank_histogram</span><span class="p">(</span><span class="n">obs_seq</span><span class="p">,</span> <span class="n">obs_type</span><span class="p">,</span> <span class="n">ens_size</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>Plot the rank histograms for the second obs_seq.final with halved error variance.</p>
<p>Once plotted, save the figure and close it.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">fig2</span> <span class="o">=</span> <span class="n">mp</span><span class="o">.</span><span class="n">plot_rank_histogram</span><span class="p">(</span><span class="n">obs_seq_half_ev</span><span class="p">,</span> <span class="n">obs_type</span><span class="p">,</span> <span class="n">ens_size</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>Exit the interactive session.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>exit<span class="o">()</span>
</pre></div>
</div>
</li>
</ol>
<p>You should now have rank histogram plots for both experiments and can now compare the two
to see how the change in observation error variances affected the results of your data
assimilation experiments. Look for differences in the shape of the histograms, which supply
information on the model bias. The results should look like similar to the images below.</p>
<p>Rank Histogram for First Lorenz 63 Experiment:</p>
<a class="reference internal image-reference" href="../_images/rh_l63.png"><img alt="Rank Histogram for First Lorenz 63 Experiment" class="align-center" src="../_images/rh_l63.png" style="width: 800px;" />
</a>
<p>Rank Histogram for Second Lorenz 63 Experiment with Halved Error Variance:</p>
<a class="reference internal image-reference" href="../_images/rh_l63_halfev.png"><img alt="Rank Histogram for Second Lorenz 63 Experiment with Halved Error Variance" class="align-center" src="../_images/rh_l63_halfev.png" style="width: 800px;" />
</a>
<p>The rank histogram for the initial experiment should be generally flatter and more evenly spread
across the ranks, indicating a more reliable forecast (the observed distribution is well represented
by the ensemble and all ensemble members represent equally likely scenarios).</p>
<p>By following this workflow, you have learned how pyDARTdiags can be easily integrated into your
DART data assimilation experiments, allowing you to effectively manipulate observation sequences
and analyze assimilation results. Please refer to the <a class="reference internal" href="index.html#userguide"><span class="std std-ref">User Guide</span></a> and
<a class="reference internal" href="../examples/index.html#examples-index"><span class="std std-ref">Examples</span></a> sections of the documentation for more detailed information and additional
examples of using pyDARTdiags.</p>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="statistics.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Statistics</p>
      </div>
    </a>
    <a class="right-next"
       href="../devel/index.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Developer Guide</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#manipulating-observation-sequences-with-pydartdiags">Manipulating Observation Sequences with pyDARTdiags</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#analyzing-dart-results-with-pydartdiags">Analyzing DART Results with pyDARTdiags</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      Â© Copyright 2025, University Corporation for Atmospheric Research.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 9.1.0.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>
<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>module: plots &#8212; pydartdiags 0.0.3b documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=d1102ebc" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=ba112473" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <script src="_static/documentation_options.js?v=72edb4f6"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="module: obs_sequence" href="obs_sequence.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">pydartdiags</a></h1>






<p>
<iframe src="https://ghbtns.com/github-btn.html?user=NCAR&repo=pyDARTdiags&type=star&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="index.html">pyDARTdiags</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="obs_sequence.html">module: obs_sequence</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">module: plots</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#plots.plot_rank_histogram"><code class="docutils literal notranslate"><span class="pre">plot_rank_histogram()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#plots.calculate_rank"><code class="docutils literal notranslate"><span class="pre">calculate_rank()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#plots.plot_profile"><code class="docutils literal notranslate"><span class="pre">plot_profile()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#plots.mean_then_sqrt"><code class="docutils literal notranslate"><span class="pre">mean_then_sqrt()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#plots.rmse_bias_by_obs_type"><code class="docutils literal notranslate"><span class="pre">rmse_bias_by_obs_type()</span></code></a></li>
</ul>
</li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="obs_sequence.html" title="previous chapter">module: obs_sequence</a></li>
  </ul></li>
</ul>
</div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="module-0">
<span id="module-plots"></span><h1>module: plots<a class="headerlink" href="#module-0" title="Link to this heading">¶</a></h1>
<dl class="py function">
<dt class="sig sig-object py" id="plots.plot_rank_histogram">
<span class="sig-prename descclassname"><span class="pre">plots.</span></span><span class="sig-name descname"><span class="pre">plot_rank_histogram</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#plots.plot_rank_histogram" title="Link to this definition">¶</a></dt>
<dd><p>Plots a rank histogram colored by observation type.</p>
<p>All histogram bars are initalized to be hidden and can be toggled visible in the plot’s legend</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="plots.calculate_rank">
<span class="sig-prename descclassname"><span class="pre">plots.</span></span><span class="sig-name descname"><span class="pre">calculate_rank</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#plots.calculate_rank" title="Link to this definition">¶</a></dt>
<dd><p>Calculate the rank of observations within an ensemble.</p>
<p>This function takes a DataFrame containing ensemble predictions and observed values,
adds sampling noise to the ensemble predictions, and calculates the rank of the observed
value within the perturbed ensemble for each observation. The rank indicates the position
of the observed value within the sorted ensemble values, with 1 being the lowest. If the
observed value is larger than the largest ensemble member, its rank is set to the ensemble
size plus one.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pd.DataFrame</em>) – A DataFrame with columns for mean, standard deviation, observed values,</p></li>
<li><p><strong>size</strong> (<em>ensemble</em>)</p></li>
<li><p><strong>observation.</strong> (<em>and observation type. The DataFrame should have one row per</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A tuple containing the rank array, ensemble size, and a result DataFrame. The result
DataFrame contains columns for ‘rank’ and ‘obstype’.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="plots.plot_profile">
<span class="sig-prename descclassname"><span class="pre">plots.</span></span><span class="sig-name descname"><span class="pre">plot_profile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">levels</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#plots.plot_profile" title="Link to this definition">¶</a></dt>
<dd><p>Plots RMSE and Bias profiles for different observation types across specified pressure levels.</p>
<p>This function takes a DataFrame containing observational data and model predictions, categorizes
the data into specified pressure levels, and calculates the RMSE and Bias for each level and
observation type. It then plots two line charts: one for RMSE and another for Bias, both as functions
of pressure level. The pressure levels are plotted on the y-axis in reversed order to represent
the vertical profile in the atmosphere correctly.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pd.DataFrame</em>) – The input DataFrame containing at least the ‘vertical’ column for pressure levels,</p></li>
<li><p><strong>Bias.</strong> (<em>and other columns required by the rmse_bias function for calculating RMSE and</em>)</p></li>
<li><p><strong>levels</strong> (<em>array-like</em>) – The bin edges for categorizing the ‘vertical’ column values into pressure levels.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A tuple containing the DataFrame with RMSE and Bias calculations, the RMSE plot figure, and the
Bias plot figure. The DataFrame includes a ‘plevels’ column representing the categorized pressure levels
and ‘hPa’ column representing the midpoint of each pressure level bin.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>tuple</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – If there are missing values in the ‘vertical’ column of the input DataFrame.</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>The function modifies the input DataFrame by adding ‘plevels’ and ‘hPa’ columns.</p></li>
<li><p>The ‘hPa’ values are calculated as half the midpoint of each pressure level bin, which may need
adjustment based on the specific requirements for pressure level representation.</p></li>
<li><p>The plots are generated using Plotly Express and are displayed inline. The y-axis of the plots is
reversed to align with standard atmospheric pressure level representation.</p></li>
</ul>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="plots.mean_then_sqrt">
<span class="sig-prename descclassname"><span class="pre">plots.</span></span><span class="sig-name descname"><span class="pre">mean_then_sqrt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#plots.mean_then_sqrt" title="Link to this definition">¶</a></dt>
<dd><p>Calculates the mean of an array-like object and then takes the square root of the result.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>arr</strong> (<em>array-like</em>) – An array-like object (such as a list or a pandas Series).
The elements should be numeric.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The square root of the mean of the input array.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>TypeError</strong> – If the input is not an array-like object containing numeric values.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="plots.rmse_bias_by_obs_type">
<span class="sig-prename descclassname"><span class="pre">plots.</span></span><span class="sig-name descname"><span class="pre">rmse_bias_by_obs_type</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obs_type</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#plots.rmse_bias_by_obs_type" title="Link to this definition">¶</a></dt>
<dd><p>Calculate the RMSE and bias for a given observation type.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>DataFrame</em>) – A pandas DataFrame.</p></li>
<li><p><strong>obs_type</strong> (<em>str</em>) – The observation type for which to calculate the RMSE and bias.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A DataFrame containing the RMSE and bias for the given observation type.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>DataFrame</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – If the observation type is not present in the DataFrame.</p>
</dd>
</dl>
</dd></dl>

</section>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &#169;2024, University Corporation for Atmospheric Research.
      
      |
      <a href="_sources/plots.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>

.. DO NOT EDIT.
.. THIS FILE WAS AUTOMATICALLY GENERATED BY SPHINX-GALLERY.
.. TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
.. "examples/03_diagnostics/plot_rank_histogram.py"
.. LINE NUMBERS ARE GIVEN BELOW.

.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        :ref:`Go to the end <sphx_glr_download_examples_03_diagnostics_plot_rank_histogram.py>`
        to download the full example code.

.. rst-class:: sphx-glr-example-title

.. _sphx_glr_examples_03_diagnostics_plot_rank_histogram.py:


Rank Histogram
==============

This example demonstrates how to plot a rank histogram.

.. GENERATED FROM PYTHON SOURCE LINES 11-13

Import the obs_sequence module
and the matplots module for plotting.

.. GENERATED FROM PYTHON SOURCE LINES 13-17

.. code-block:: Python

    import pydartdiags.obs_sequence.obs_sequence as obsq
    from pydartdiags.matplots import matplots as mp
    from pydartdiags.data import get_example_data








.. GENERATED FROM PYTHON SOURCE LINES 18-20

Chose an obs_seq file to read.
In this example, we are using a small obs_seq file "obs_seq.final.1000".

.. GENERATED FROM PYTHON SOURCE LINES 20-22

.. code-block:: Python

    data_file = get_example_data("obs_seq.final.1000")





.. rst-class:: sphx-glr-script-out

 .. code-block:: none

    package_dir: /home/runner/work/pyDARTdiags/pyDARTdiags
    Using development data file: /home/runner/work/pyDARTdiags/pyDARTdiags/data/obs_seq.final.1000




.. GENERATED FROM PYTHON SOURCE LINES 23-24

Read the obs_seq file into an obs_seq object.

.. GENERATED FROM PYTHON SOURCE LINES 24-26

.. code-block:: Python

    obs_seq = obsq.ObsSequence(data_file)








.. GENERATED FROM PYTHON SOURCE LINES 27-30

Chose an observation type.
The observation types are stored in the 'type' column.
To see which observation types are in the dataframe, use the unique method:

.. GENERATED FROM PYTHON SOURCE LINES 30-32

.. code-block:: Python

    obs_seq.df['type'].unique()





.. rst-class:: sphx-glr-script-out

 .. code-block:: none


    array(['ACARS_TEMPERATURE', 'ACARS_U_WIND_COMPONENT',
           'ACARS_V_WIND_COMPONENT', 'AIRCRAFT_TEMPERATURE',
           'AIRCRAFT_U_WIND_COMPONENT', 'AIRCRAFT_V_WIND_COMPONENT'],
          dtype=object)



.. GENERATED FROM PYTHON SOURCE LINES 33-35

For this example, we are going to look at the rank histogram for 
ACARS_TEMPERATURE observations.

.. GENERATED FROM PYTHON SOURCE LINES 35-37

.. code-block:: Python

    obs_type = 'ACARS_TEMPERATURE'








.. GENERATED FROM PYTHON SOURCE LINES 38-43

Chose the levels to plot.
The vertical coordinate of the observations are stored in the ``vertical`` column.
The units for the vertical coordinate are stored in the ``vert_unit`` column
In this case the vertical coordinate of the observations are in pressure (Pa).
Typically in atmospheric science we use hPa as the unit for pressure.

.. GENERATED FROM PYTHON SOURCE LINES 43-46

.. code-block:: Python

    hPalevels = [0.0, 100.0,  150.0, 200.0, 250.0, 300.0, 400.0, 500.0, 700, 850, 925, 1000] 
    levels = [i * 100 for i in hPalevels] # convert hPa to Pa








.. GENERATED FROM PYTHON SOURCE LINES 47-50

Plot the rank histogram.
The dataframe has prior and posterior information so both the prior
and posterior rank histograms are plotted.

.. GENERATED FROM PYTHON SOURCE LINES 50-52

.. code-block:: Python

    ens_size = 80
    fig = mp.plot_rank_histogram(obs_seq, obs_type, ens_size, levels)



.. rst-class:: sphx-glr-horizontal


    *

      .. image-sg:: /examples/03_diagnostics/images/sphx_glr_plot_rank_histogram_001.png
         :alt: Prior Rank Histogram, Posterior Rank Histogram
         :srcset: /examples/03_diagnostics/images/sphx_glr_plot_rank_histogram_001.png
         :class: sphx-glr-multi-img

    *

      .. image-sg:: /examples/03_diagnostics/images/sphx_glr_plot_rank_histogram_002.png
         :alt: Prior Rank Histogram, Posterior Rank Histogram
         :srcset: /examples/03_diagnostics/images/sphx_glr_plot_rank_histogram_002.png
         :class: sphx-glr-multi-img

    *

      .. image-sg:: /examples/03_diagnostics/images/sphx_glr_plot_rank_histogram_003.png
         :alt: Prior Rank Histogram, Posterior Rank Histogram
         :srcset: /examples/03_diagnostics/images/sphx_glr_plot_rank_histogram_003.png
         :class: sphx-glr-multi-img

    *

      .. image-sg:: /examples/03_diagnostics/images/sphx_glr_plot_rank_histogram_004.png
         :alt: Prior Rank Histogram, Posterior Rank Histogram
         :srcset: /examples/03_diagnostics/images/sphx_glr_plot_rank_histogram_004.png
         :class: sphx-glr-multi-img

    *

      .. image-sg:: /examples/03_diagnostics/images/sphx_glr_plot_rank_histogram_005.png
         :alt: Prior Rank Histogram, Posterior Rank Histogram
         :srcset: /examples/03_diagnostics/images/sphx_glr_plot_rank_histogram_005.png
         :class: sphx-glr-multi-img

    *

      .. image-sg:: /examples/03_diagnostics/images/sphx_glr_plot_rank_histogram_006.png
         :alt: Prior Rank Histogram, Posterior Rank Histogram
         :srcset: /examples/03_diagnostics/images/sphx_glr_plot_rank_histogram_006.png
         :class: sphx-glr-multi-img

    *

      .. image-sg:: /examples/03_diagnostics/images/sphx_glr_plot_rank_histogram_007.png
         :alt: ACARS_TEMPERATURE at Level 77500.0 hPa, Prior Rank Histogram, Posterior Rank Histogram
         :srcset: /examples/03_diagnostics/images/sphx_glr_plot_rank_histogram_007.png
         :class: sphx-glr-multi-img






.. rst-class:: sphx-glr-timing

   **Total running time of the script:** (0 minutes 1.886 seconds)


.. _sphx_glr_download_examples_03_diagnostics_plot_rank_histogram.py:

.. only:: html

  .. container:: sphx-glr-footer sphx-glr-footer-example

    .. container:: sphx-glr-download sphx-glr-download-jupyter

      :download:`Download Jupyter notebook: plot_rank_histogram.ipynb <plot_rank_histogram.ipynb>`

    .. container:: sphx-glr-download sphx-glr-download-python

      :download:`Download Python source code: plot_rank_histogram.py <plot_rank_histogram.py>`

    .. container:: sphx-glr-download sphx-glr-download-zip

      :download:`Download zipped: plot_rank_histogram.zip <plot_rank_histogram.zip>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_

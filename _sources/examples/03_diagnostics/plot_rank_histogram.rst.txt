
.. DO NOT EDIT.
.. THIS FILE WAS AUTOMATICALLY GENERATED BY SPHINX-GALLERY.
.. TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
.. "examples/03_diagnostics/plot_rank_histogram.py"
.. LINE NUMBERS ARE GIVEN BELOW.

.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        :ref:`Go to the end <sphx_glr_download_examples_03_diagnostics_plot_rank_histogram.py>`
        to download the full example code.

.. rst-class:: sphx-glr-example-title

.. _sphx_glr_examples_03_diagnostics_plot_rank_histogram.py:


Rank Histogram
==============

This example demonstrates how to plot a rank histogram.

.. GENERATED FROM PYTHON SOURCE LINES 11-13

Import the obs_sequence module
and the matplots module for plotting.

.. GENERATED FROM PYTHON SOURCE LINES 13-16

.. code-block:: Python

    import pydartdiags.obs_sequence.obs_sequence as obsq
    from pydartdiags.matplots import matplots as mp








.. GENERATED FROM PYTHON SOURCE LINES 17-21

Chose an obs_seq file to read.
In this example, we are using a small obs_seq file "obs_seq.final.1000"
that comes with the pyDARTdiags package 
in the data directory, so we ``import os`` to get the path to the file.

.. GENERATED FROM PYTHON SOURCE LINES 21-25

.. code-block:: Python

    import os
    data_dir = os.path.join(os.getcwd(), "../..", "data")
    data_file = os.path.join(data_dir, "obs_seq.final.1000")








.. GENERATED FROM PYTHON SOURCE LINES 26-27

Read the obs_seq file into an obs_seq object.

.. GENERATED FROM PYTHON SOURCE LINES 27-29

.. code-block:: Python

    obs_seq = obsq.obs_sequence(data_file)








.. GENERATED FROM PYTHON SOURCE LINES 30-33

Chose an observation type.
The observation types are stored in the 'type' column.
To see which observation types are in the dataframe, use the unique method:

.. GENERATED FROM PYTHON SOURCE LINES 33-35

.. code-block:: Python

    obs_seq.df['type'].unique()





.. rst-class:: sphx-glr-script-out

 .. code-block:: none


    array(['ACARS_TEMPERATURE', 'ACARS_U_WIND_COMPONENT',
           'ACARS_V_WIND_COMPONENT', 'AIRCRAFT_TEMPERATURE',
           'AIRCRAFT_U_WIND_COMPONENT', 'AIRCRAFT_V_WIND_COMPONENT'],
          dtype=object)



.. GENERATED FROM PYTHON SOURCE LINES 36-38

For this example, we are going to look at the rank histogram for 
ACARS_TEMPERATURE observations.

.. GENERATED FROM PYTHON SOURCE LINES 38-40

.. code-block:: Python

    obs_type = 'ACARS_TEMPERATURE'








.. GENERATED FROM PYTHON SOURCE LINES 41-46

Chose the levels to plot.
The vertical coordinate of the observations are stored in the ``vertical`` column.
The units for the vertical coordinate are stored in the ``vert_unit`` column
In this case the vertical coordinate of the observations are in pressure (Pa).
Typically in atmospheric science we use hPa as the unit for pressure.

.. GENERATED FROM PYTHON SOURCE LINES 46-49

.. code-block:: Python

    hPalevels = [0.0, 100.0,  150.0, 200.0, 250.0, 300.0, 400.0, 500.0, 700, 850, 925, 1000] 
    levels = [i * 100 for i in hPalevels] # convert hPa to Pa








.. GENERATED FROM PYTHON SOURCE LINES 50-53

Plot the rank histogram.
The dataframe has prior and posterior information so both the prior
and posterior rank histograms are plotted.

.. GENERATED FROM PYTHON SOURCE LINES 53-55

.. code-block:: Python

    ens_size = 80
    fig = mp.plot_rank_histogram(obs_seq, levels, obs_type, ens_size)



.. rst-class:: sphx-glr-horizontal


    *

      .. image-sg:: /examples/03_diagnostics/images/sphx_glr_plot_rank_histogram_001.png
         :alt: ACARS_TEMPERATURE at Level 17500.0, Prior Rank Histogram, Posterior Rank Histogram
         :srcset: /examples/03_diagnostics/images/sphx_glr_plot_rank_histogram_001.png
         :class: sphx-glr-multi-img

    *

      .. image-sg:: /examples/03_diagnostics/images/sphx_glr_plot_rank_histogram_002.png
         :alt: ACARS_TEMPERATURE at Level 22500.0, Prior Rank Histogram, Posterior Rank Histogram
         :srcset: /examples/03_diagnostics/images/sphx_glr_plot_rank_histogram_002.png
         :class: sphx-glr-multi-img

    *

      .. image-sg:: /examples/03_diagnostics/images/sphx_glr_plot_rank_histogram_003.png
         :alt: ACARS_TEMPERATURE at Level 27500.0, Prior Rank Histogram, Posterior Rank Histogram
         :srcset: /examples/03_diagnostics/images/sphx_glr_plot_rank_histogram_003.png
         :class: sphx-glr-multi-img

    *

      .. image-sg:: /examples/03_diagnostics/images/sphx_glr_plot_rank_histogram_004.png
         :alt: ACARS_TEMPERATURE at Level 35000.0, Prior Rank Histogram, Posterior Rank Histogram
         :srcset: /examples/03_diagnostics/images/sphx_glr_plot_rank_histogram_004.png
         :class: sphx-glr-multi-img

    *

      .. image-sg:: /examples/03_diagnostics/images/sphx_glr_plot_rank_histogram_005.png
         :alt: ACARS_TEMPERATURE at Level 45000.0, Prior Rank Histogram, Posterior Rank Histogram
         :srcset: /examples/03_diagnostics/images/sphx_glr_plot_rank_histogram_005.png
         :class: sphx-glr-multi-img

    *

      .. image-sg:: /examples/03_diagnostics/images/sphx_glr_plot_rank_histogram_006.png
         :alt: ACARS_TEMPERATURE at Level 60000.0, Prior Rank Histogram, Posterior Rank Histogram
         :srcset: /examples/03_diagnostics/images/sphx_glr_plot_rank_histogram_006.png
         :class: sphx-glr-multi-img

    *

      .. image-sg:: /examples/03_diagnostics/images/sphx_glr_plot_rank_histogram_007.png
         :alt: ACARS_TEMPERATURE at Level 77500.0, Prior Rank Histogram, Posterior Rank Histogram
         :srcset: /examples/03_diagnostics/images/sphx_glr_plot_rank_histogram_007.png
         :class: sphx-glr-multi-img






.. rst-class:: sphx-glr-timing

   **Total running time of the script:** (0 minutes 2.518 seconds)


.. _sphx_glr_download_examples_03_diagnostics_plot_rank_histogram.py:

.. only:: html

  .. container:: sphx-glr-footer sphx-glr-footer-example

    .. container:: sphx-glr-download sphx-glr-download-jupyter

      :download:`Download Jupyter notebook: plot_rank_histogram.ipynb <plot_rank_histogram.ipynb>`

    .. container:: sphx-glr-download sphx-glr-download-python

      :download:`Download Python source code: plot_rank_histogram.py <plot_rank_histogram.py>`

    .. container:: sphx-glr-download sphx-glr-download-zip

      :download:`Download zipped: plot_rank_histogram.zip <plot_rank_histogram.zip>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_
